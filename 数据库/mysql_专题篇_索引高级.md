# MySqlç´¢å¼•B+æ ‘ğŸŒ²

 InnoDB å­˜å‚¨å¼•æ“ä¸­çš„ ***B+ æ ‘ç´¢å¼•***ã€‚è¦ä»‹ç» B+ æ ‘ç´¢å¼•ï¼Œå°±ä¸å¾—ä¸æäºŒå‰æŸ¥æ‰¾æ ‘ï¼Œå¹³è¡¡äºŒå‰æ ‘å’Œ B æ ‘è¿™ä¸‰ç§æ•°æ®ç»“æ„ã€‚B+ æ ‘å°±æ˜¯ä»ä»–ä»¬ä»¨æ¼”åŒ–æ¥çš„ã€‚

ç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶ - innodbä¸­ - åˆäºŒä¸ºä¸€çš„.

ç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶ - myisamä¸­ - åˆ†å¼€ç‹¬ç«‹çš„.



# äºŒå‰æ ‘æŸ¥æ‰¾

![](https://gitee.com/bestzmr/blog-resources/raw/master/resources/imgs/%E4%BA%8C%E5%8F%89%E6%A0%91.jpg)  

ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ä¸º user è¡¨ï¼ˆç”¨æˆ·ä¿¡æ¯è¡¨ï¼‰å»ºç«‹äº†ä¸€ä¸ªäºŒå‰æŸ¥æ‰¾æ ‘çš„ç´¢å¼•ã€‚

å›¾ä¸­çš„åœ†ä¸ºäºŒå‰æŸ¥æ‰¾æ ‘çš„èŠ‚ç‚¹ï¼Œ***èŠ‚ç‚¹ä¸­å­˜å‚¨äº†é”®ï¼ˆkeyï¼‰å’Œæ•°æ®ï¼ˆdataï¼‰***ã€‚**é”®å¯¹åº” user è¡¨ä¸­çš„ id**ï¼Œ**æ•°æ®å¯¹åº” user è¡¨ä¸­çš„è¡Œæ•°æ®ã€‚**

äºŒå‰æŸ¥æ‰¾æ ‘çš„ç‰¹ç‚¹å°±æ˜¯ä»»ä½•èŠ‚ç‚¹çš„**å·¦å­èŠ‚ç‚¹çš„é”®å€¼éƒ½å°äºå½“å‰èŠ‚ç‚¹çš„é”®å€¼**ï¼Œ**å³å­èŠ‚ç‚¹çš„é”®å€¼éƒ½å¤§äºå½“å‰èŠ‚ç‚¹çš„é”®å€¼**ã€‚é¡¶ç«¯çš„èŠ‚ç‚¹æˆ‘ä»¬ç§°ä¸º**æ ¹èŠ‚ç‚¹**ï¼Œ**æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹æˆ‘ä»¬ç§°ä¹‹ä¸º*å¶èŠ‚ç‚¹*ã€‚**



***äºŒå‰æ ‘æŸ¥æ‰¾æµç¨‹:***

å¦‚æœæˆ‘ä»¬éœ€è¦æŸ¥æ‰¾ id=12 çš„ç”¨æˆ·ä¿¡æ¯ï¼Œåˆ©ç”¨æˆ‘ä»¬åˆ›å»ºçš„äºŒå‰æŸ¥æ‰¾æ ‘ç´¢å¼•ï¼ŒæŸ¥æ‰¾æµç¨‹å¦‚ä¸‹ï¼š

- å°†æ ¹èŠ‚ç‚¹ä½œä¸ºå½“å‰èŠ‚ç‚¹ï¼ŒæŠŠ 12 ä¸å½“å‰èŠ‚ç‚¹çš„é”®å€¼ 10 æ¯”è¾ƒï¼Œ12 å¤§äº 10ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æŠŠå½“å‰èŠ‚ç‚¹>çš„å³å­èŠ‚ç‚¹ä½œä¸ºå½“å‰èŠ‚ç‚¹ã€‚
- ç»§ç»­æŠŠ 12 å’Œå½“å‰èŠ‚ç‚¹çš„é”®å€¼ 13 æ¯”è¾ƒï¼Œå‘ç° 12 å°äº 13ï¼ŒæŠŠå½“å‰èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹ä½œä¸ºå½“å‰èŠ‚ç‚¹ã€‚
- æŠŠ 12 å’Œå½“å‰èŠ‚ç‚¹çš„é”®å€¼ 12 å¯¹æ¯”ï¼Œ12 ç­‰äº 12ï¼Œæ»¡è¶³æ¡ä»¶ï¼Œæˆ‘ä»¬ä»å½“å‰èŠ‚ç‚¹ä¸­å–å‡º dataï¼Œå³ id=12ï¼Œname=xmã€‚

åˆ©ç”¨äºŒå‰æŸ¥æ‰¾æ ‘æˆ‘ä»¬åªéœ€è¦ 3 æ¬¡å³å¯æ‰¾åˆ°åŒ¹é…çš„æ•°æ®ã€‚å¦‚æœåœ¨è¡¨ä¸­ä¸€æ¡æ¡çš„æŸ¥æ‰¾çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦ 6 æ¬¡æ‰èƒ½æ‰¾åˆ°ã€‚



# å¹³è¡¡äºŒå‰æ ‘

ä¸Šé¢æˆ‘ä»¬è®²è§£äº†åˆ©ç”¨äºŒå‰æŸ¥æ‰¾æ ‘å¯ä»¥å¿«é€Ÿçš„æ‰¾åˆ°æ•°æ®ã€‚ä½†æ˜¯ï¼Œå¦‚æœä¸Šé¢çš„äºŒå‰æŸ¥æ‰¾æ ‘æ˜¯è¿™æ ·çš„æ„é€ ï¼š

![](https://gitee.com/bestzmr/blog-resources/raw/master/resources/imgs/link.jpg) 

è¿™ä¸ªæ—¶å€™å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„**äºŒå‰æŸ¥æ‰¾æ ‘å˜æˆäº†ä¸€ä¸ªé“¾è¡¨**ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦æŸ¥æ‰¾ id=17 çš„ç”¨æˆ·ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥æ‰¾ 7 æ¬¡ï¼Œä¹Ÿå°±ç›¸å½“äº**å…¨è¡¨æ‰«æäº†**ã€‚ 

å¯¼è‡´è¿™ä¸ªç°è±¡çš„åŸå› å…¶å®æ˜¯**äºŒå‰æŸ¥æ‰¾æ ‘å˜å¾—ä¸å¹³è¡¡äº†**ï¼Œä¹Ÿå°±æ˜¯**é«˜åº¦å¤ªé«˜äº†**ï¼Œä»è€Œå¯¼è‡´æŸ¥æ‰¾æ•ˆç‡çš„ä¸ç¨³å®šã€‚

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯äºŒå‰æŸ¥æ‰¾æ ‘ä¸€ç›´ä¿æŒå¹³è¡¡ï¼Œå°±éœ€è¦ç”¨åˆ°å¹³è¡¡äºŒå‰æ ‘äº†ã€‚ 

**å¹³è¡¡äºŒå‰æ ‘åˆç§° AVL æ ‘**ï¼Œåœ¨æ»¡è¶³äºŒå‰æŸ¥æ‰¾æ ‘ç‰¹æ€§çš„åŸºç¡€ä¸Šï¼Œè¦æ±‚**æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„é«˜åº¦å·®ä¸èƒ½è¶…è¿‡ 1ã€‚** 

ä¸‹é¢æ˜¯å¹³è¡¡äºŒå‰æ ‘å’Œéå¹³è¡¡äºŒå‰æ ‘çš„å¯¹æ¯”ï¼š

![](https://gitee.com/bestzmr/blog-resources/raw/master/resources/imgs/diff.png) 

å·¦è¾¹äºŒå‰æ ‘çš„èŠ‚ç‚¹45å·¦å­æ ‘é«˜åº¦2ï¼Œå³å­æ ‘é«˜åº¦0ï¼Œå·¦å³å­æ ‘é«˜åº¦å·®ä¸º2-0=2

  åœ¨å›¾äºŒå³è¾¹çš„AVLæ ‘ä¸Šï¼š
  èŠ‚ç‚¹50çš„å·¦å­æ ‘é«˜åº¦ä¸º3ï¼Œå³å­æ ‘é«˜åº¦ä¸º2ï¼ŒBF= 3-2 = 1ï¼›
  èŠ‚ç‚¹45çš„å·¦å­æ ‘é«˜åº¦ä¸º2ï¼Œå³å­æ ‘é«˜åº¦ä¸º1ï¼ŒBF= 2-1 = 1ï¼›
  èŠ‚ç‚¹46çš„å·¦å­æ ‘é«˜åº¦ä¸º0ï¼Œå³å­æ ‘é«˜åº¦ä¸º0ï¼ŒBF= 0-0 = 0ï¼›
  èŠ‚ç‚¹65çš„å·¦å­æ ‘é«˜åº¦ä¸º0ï¼Œå³å­æ ‘é«˜åº¦ä¸º1ï¼ŒBF= 0-1 = -1ï¼›
  å¯¹äºå¹³è¡¡äºŒå‰æ ‘ï¼ŒBFçš„å–å€¼èŒƒå›´ä¸º[-1,1]ã€‚å¦‚æœå‘ç°æŸä¸ªèŠ‚ç‚¹çš„BFå€¼ä¸åœ¨æ­¤èŒƒå›´ï¼Œåˆ™éœ€è¦å¯¹æ ‘è¿›è¡Œè°ƒæ•´ã€‚

# Bæ ‘ğŸŒ²

å› ä¸ºå†…å­˜çš„æ˜“å¤±æ€§ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¼šé€‰æ‹©å°† user è¡¨ä¸­çš„æ•°æ®å’Œç´¢å¼•å­˜å‚¨åœ¨ç£ç›˜è¿™ç§å¤–å›´è®¾å¤‡ä¸­ã€‚

ä½†æ˜¯å’Œå†…å­˜ç›¸æ¯”ï¼Œä»ç£ç›˜ä¸­è¯»å–æ•°æ®çš„é€Ÿåº¦ä¼šæ…¢ä¸Šç™¾å€åƒå€ç”šè‡³ä¸‡å€ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åº”å½“å°½é‡å‡å°‘ä»ç£ç›˜ä¸­è¯»å–æ•°æ®çš„æ¬¡æ•°ã€‚å¦å¤–ï¼Œä»ç£ç›˜ä¸­è¯»å–æ•°æ®æ—¶ï¼Œéƒ½æ˜¯æŒ‰ç…§ç£ç›˜å—æ¥è¯»å–çš„ï¼Œå¹¶ä¸æ˜¯ä¸€æ¡ä¸€æ¡çš„è¯»ã€‚

å¦‚æœæˆ‘ä»¬èƒ½æŠŠå°½é‡å¤šçš„æ•°æ®æ”¾è¿›ç£ç›˜å—ä¸­ï¼Œé‚£ä¸€æ¬¡ç£ç›˜è¯»å–æ“ä½œå°±ä¼šè¯»å–æ›´å¤šæ•°æ®ï¼Œé‚£æˆ‘ä»¬æŸ¥æ‰¾æ•°æ®çš„æ—¶é—´ä¹Ÿä¼šå¤§å¹…åº¦é™ä½ã€‚å¦‚æœæˆ‘ä»¬ç”¨æ ‘è¿™ç§æ•°æ®ç»“æ„ä½œä¸ºç´¢å¼•çš„æ•°æ®ç»“æ„ï¼Œé‚£æˆ‘ä»¬æ¯æŸ¥æ‰¾ä¸€æ¬¡æ•°æ®å°±éœ€è¦ä»ç£ç›˜ä¸­è¯»å–ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ä¸€ä¸ªç£ç›˜å—ã€‚æˆ‘ä»¬éƒ½çŸ¥é“å¹³è¡¡äºŒå‰æ ‘å¯æ˜¯æ¯ä¸ªèŠ‚ç‚¹åªå­˜å‚¨ä¸€ä¸ªé”®å€¼å’Œæ•°æ®çš„ã€‚é‚£è¯´æ˜ä»€ä¹ˆï¼Ÿè¯´æ˜æ¯ä¸ªç£ç›˜å—ä»…ä»…å­˜å‚¨ä¸€ä¸ªé”®å€¼å’Œæ•°æ®ï¼é‚£å¦‚æœæˆ‘ä»¬è¦å­˜å‚¨æµ·é‡çš„æ•°æ®å‘¢ï¼Ÿ

å¯ä»¥æƒ³è±¡åˆ°äºŒå‰æ ‘çš„èŠ‚ç‚¹å°†ä¼šéå¸¸å¤šï¼Œé«˜åº¦ä¹Ÿä¼šæå…¶é«˜ï¼Œæˆ‘ä»¬æŸ¥æ‰¾æ•°æ®æ—¶ä¹Ÿä¼šè¿›è¡Œå¾ˆå¤šæ¬¡ç£ç›˜ IOï¼Œæˆ‘ä»¬æŸ¥æ‰¾æ•°æ®çš„æ•ˆç‡å°†ä¼šæä½ï¼

![](https://gitee.com/bestzmr/blog-resources/raw/master/resources/imgs/n.jpg) 

ä¸ºäº†è§£å†³å¹³è¡¡äºŒå‰æ ‘çš„è¿™ä¸ªå¼Šç«¯ï¼Œæˆ‘ä»¬åº”è¯¥å¯»æ‰¾ä¸€ç§å•ä¸ªèŠ‚ç‚¹å¯ä»¥å­˜å‚¨å¤šä¸ªé”®å€¼å’Œæ•°æ®çš„å¹³è¡¡æ ‘ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦è¯´çš„ B æ ‘

B æ ‘ï¼ˆBalance Treeï¼‰å³ä¸ºå¹³è¡¡æ ‘çš„æ„æ€ï¼Œä¸‹å›¾å³æ˜¯ä¸€æ£µ B æ ‘

![](https://gitee.com/bestzmr/blog-resources/raw/master/resources/imgs/B.jpg) 

å›¾ä¸­çš„ p èŠ‚ç‚¹ä¸ºæŒ‡å‘å­èŠ‚ç‚¹çš„æŒ‡é’ˆï¼ŒäºŒå‰æŸ¥æ‰¾æ ‘å’Œå¹³è¡¡äºŒå‰æ ‘å…¶å®ä¹Ÿæœ‰ï¼Œå› ä¸ºå›¾çš„ç¾è§‚æ€§ï¼Œè¢«çœç•¥äº†ã€‚

å›¾ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ç§°ä¸ºé¡µï¼Œé¡µå°±æ˜¯æˆ‘ä»¬ä¸Šé¢è¯´çš„ç£ç›˜å—ï¼Œåœ¨ MySQL ä¸­æ•°æ®è¯»å–çš„åŸºæœ¬å•ä½éƒ½æ˜¯é¡µï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå«åšé¡µæ›´ç¬¦åˆ MySQL ä¸­ç´¢å¼•çš„åº•å±‚æ•°æ®ç»“æ„ã€‚

ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œ**B æ ‘ç›¸å¯¹äºå¹³è¡¡äºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨äº†æ›´å¤šçš„é”®å€¼ï¼ˆkeyï¼‰å’Œæ•°æ®ï¼ˆdataï¼‰ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹æ‹¥æœ‰æ›´å¤šçš„å­èŠ‚ç‚¹**ï¼Œå­èŠ‚ç‚¹çš„ä¸ªæ•°ä¸€èˆ¬ç§°ä¸ºé˜¶ï¼Œ**ä¸Šè¿°å›¾ä¸­çš„ B æ ‘ä¸º 3 é˜¶ B æ ‘ï¼Œé«˜åº¦ä¹Ÿä¼šå¾ˆä½ã€‚**

åŸºäºè¿™ä¸ªç‰¹æ€§ï¼Œ***B æ ‘æŸ¥æ‰¾æ•°æ®è¯»å–ç£ç›˜çš„æ¬¡æ•°å°†ä¼šå¾ˆå°‘ï¼Œæ•°æ®çš„æŸ¥æ‰¾æ•ˆç‡ä¹Ÿä¼šæ¯”å¹³è¡¡äºŒå‰æ ‘é«˜å¾ˆå¤šã€‚***

å‡å¦‚æˆ‘ä»¬è¦æŸ¥æ‰¾ id=28 çš„ç”¨æˆ·ä¿¡æ¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨ä¸Šå›¾ B æ ‘ä¸­æŸ¥æ‰¾çš„æµç¨‹å¦‚ä¸‹ï¼š

- å…ˆæ‰¾åˆ°æ ¹èŠ‚ç‚¹ä¹Ÿå°±æ˜¯é¡µ 1ï¼Œåˆ¤æ–­ 28 åœ¨é”®å€¼ 17 å’Œ 35 ä¹‹é—´ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ ¹æ®é¡µ 1 ä¸­çš„æŒ‡é’ˆ p2 æ‰¾åˆ°é¡µ 3ã€‚
- å°† 28 å’Œé¡µ 3 ä¸­çš„é”®å€¼ç›¸æ¯”è¾ƒï¼Œ28 åœ¨ 26 å’Œ 30 ä¹‹é—´ï¼Œæˆ‘ä»¬æ ¹æ®é¡µ 3 ä¸­çš„æŒ‡é’ˆ p2 æ‰¾åˆ°é¡µ 8ã€‚
- å°† 28 å’Œé¡µ 8 ä¸­çš„é”®å€¼ç›¸æ¯”è¾ƒï¼Œå‘ç°æœ‰åŒ¹é…çš„é”®å€¼ 28ï¼Œé”®å€¼ 28 å¯¹åº”çš„ç”¨æˆ·ä¿¡æ¯ä¸ºï¼ˆ28ï¼Œbvï¼‰ã€‚



# B+æ ‘ğŸŒ²

B+ æ ‘æ˜¯å¯¹ B æ ‘çš„è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚è®©æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ B+ æ ‘çš„ç»“æ„å›¾ï¼š

![](https://gitee.com/bestzmr/blog-resources/raw/master/resources/imgs/B2.jpg) 

B+ æ ‘å’Œ B æ ‘æœ‰ä»€ä¹ˆä¸åŒ:

* B+ æ ‘éå¶å­èŠ‚ç‚¹ä¸Šæ˜¯ä¸å­˜å‚¨æ•°æ®çš„ï¼Œä»…å­˜å‚¨é”®å€¼ï¼Œè€Œ B æ ‘èŠ‚ç‚¹ä¸­ä¸ä»…å­˜å‚¨é”®å€¼ï¼Œä¹Ÿä¼šå­˜å‚¨æ•°æ®ã€‚

  ä¹‹æ‰€ä»¥è¿™ä¹ˆåšæ˜¯å› ä¸ºåœ¨æ•°æ®åº“ä¸­é¡µçš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œ***InnoDB ä¸­é¡µçš„é»˜è®¤å¤§å°æ˜¯ 16KBã€‚***

  å¦‚æœä¸å­˜å‚¨æ•°æ®ï¼Œé‚£ä¹ˆå°±ä¼šå­˜å‚¨æ›´å¤šçš„é”®å€¼ï¼Œç›¸åº”çš„æ ‘çš„é˜¶æ•°ï¼ˆèŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ ‘ï¼‰å°±ä¼šæ›´å¤§ï¼Œæ ‘å°±ä¼šæ›´çŸ®æ›´èƒ–ï¼Œå¦‚æ­¤ä¸€æ¥æˆ‘ä»¬æŸ¥æ‰¾æ•°æ®è¿›è¡Œç£ç›˜çš„ IO æ¬¡æ•°åˆä¼šå†æ¬¡å‡å°‘ï¼Œæ•°æ®æŸ¥è¯¢çš„æ•ˆç‡ä¹Ÿä¼šæ›´å¿«ã€‚

  å¦å¤–ï¼ŒB+ æ ‘çš„é˜¶æ•°æ˜¯ç­‰äºé”®å€¼çš„æ•°é‡çš„ï¼Œå¦‚æœæˆ‘ä»¬çš„ B+ æ ‘ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥å­˜å‚¨ 1000 ä¸ªé”®å€¼ï¼Œé‚£ä¹ˆ 3 å±‚ B+ æ ‘å¯ä»¥å­˜å‚¨ 1000Ã—1000Ã—1000=10 äº¿ä¸ªæ•°æ®ã€‚

  ä¸€èˆ¬æ ¹èŠ‚ç‚¹æ˜¯å¸¸é©»å†…å­˜çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬æŸ¥æ‰¾ 10 äº¿æ•°æ®ï¼Œåªéœ€è¦ 2 æ¬¡ç£ç›˜ IOã€‚

* å› ä¸º B+ æ ‘ç´¢å¼•çš„æ‰€æœ‰æ•°æ®å‡å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ï¼Œè€Œ***ä¸”æ•°æ®æ˜¯æŒ‰ç…§é¡ºåºæ’åˆ—çš„ã€‚***

  é‚£ä¹ˆ B+ æ ‘ä½¿å¾—èŒƒå›´æŸ¥æ‰¾ï¼Œæ’åºæŸ¥æ‰¾ï¼Œåˆ†ç»„æŸ¥æ‰¾ä»¥åŠå»é‡æŸ¥æ‰¾å˜å¾—å¼‚å¸¸ç®€å•ã€‚è€Œ B æ ‘å› ä¸ºæ•°æ®åˆ†æ•£åœ¨å„ä¸ªèŠ‚ç‚¹ï¼Œè¦å®ç°è¿™ä¸€ç‚¹æ˜¯å¾ˆä¸å®¹æ˜“çš„ã€‚æœ‰å¿ƒçš„è¯»è€…å¯èƒ½è¿˜å‘ç°ä¸Šå›¾ B+ æ ‘ä¸­å„ä¸ªé¡µä¹‹é—´æ˜¯é€šè¿‡åŒå‘é“¾è¡¨è¿æ¥çš„ï¼Œå¶å­èŠ‚ç‚¹ä¸­çš„æ•°æ®æ˜¯é€šè¿‡å•å‘é“¾è¡¨è¿æ¥çš„ã€‚å…¶å®ä¸Šé¢çš„ B æ ‘æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹å„ä¸ªèŠ‚ç‚¹åŠ ä¸Šé“¾è¡¨ã€‚è¿™äº›ä¸æ˜¯å®ƒä»¬ä¹‹å‰çš„åŒºåˆ«ï¼Œæ˜¯å› ä¸ºåœ¨ MySQL çš„ InnoDB å­˜å‚¨å¼•æ“ä¸­ï¼Œç´¢å¼•å°±æ˜¯è¿™æ ·å­˜å‚¨çš„ã€‚

  ä¹Ÿå°±æ˜¯è¯´ä¸Šå›¾ä¸­çš„ B+ æ ‘ç´¢å¼•å°±æ˜¯ InnoDB ä¸­ B+ æ ‘ç´¢å¼•çœŸæ­£çš„å®ç°æ–¹å¼ï¼Œå‡†ç¡®çš„è¯´åº”è¯¥æ˜¯èšé›†ç´¢å¼•ï¼ˆèšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•ä¸‹é¢ä¼šè®²åˆ°ï¼‰ã€‚é€šè¿‡ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ InnoDB ä¸­ï¼Œ**æˆ‘ä»¬é€šè¿‡æ•°æ®é¡µä¹‹é—´é€šè¿‡åŒå‘é“¾è¡¨è¿æ¥ä»¥åŠå¶å­èŠ‚ç‚¹ä¸­æ•°æ®ä¹‹é—´é€šè¿‡å•å‘é“¾è¡¨è¿æ¥çš„æ–¹å¼å¯ä»¥æ‰¾åˆ°è¡¨ä¸­æ‰€æœ‰çš„æ•°æ®ã€‚**

  MyISAM ä¸­çš„ B+ æ ‘ç´¢å¼•å®ç°ä¸ InnoDB ä¸­çš„ç•¥æœ‰ä¸åŒã€‚**åœ¨ MyISAM ä¸­ï¼ŒB+ æ ‘ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å¹¶ä¸å­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯å­˜å‚¨æ•°æ®çš„æ–‡ä»¶åœ°å€ã€‚**

  

# èšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•

åœ¨ä¸ŠèŠ‚ä»‹ç» B+ æ ‘ç´¢å¼•çš„æ—¶å€™ï¼Œæˆ‘ä»¬æåˆ°äº†å›¾ä¸­çš„ç´¢å¼•å…¶å®æ˜¯èšé›†ç´¢å¼•çš„å®ç°æ–¹å¼ã€‚

é‚£ä»€ä¹ˆæ˜¯èšé›†ç´¢å¼•å‘¢ï¼Ÿåœ¨ MySQL ä¸­ï¼ŒB+ æ ‘ç´¢å¼•æŒ‰ç…§å­˜å‚¨æ–¹å¼çš„ä¸åŒåˆ†ä¸ºèšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•ã€‚

è¿™é‡Œæˆ‘ä»¬ç€é‡ä»‹ç» InnoDB ä¸­çš„èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•ï¼š

* èšé›†ç´¢å¼•ï¼ˆèšç°‡ç´¢å¼•ï¼‰ï¼š***ä»¥ InnoDB ä½œä¸ºå­˜å‚¨å¼•æ“çš„è¡¨ï¼Œè¡¨ä¸­çš„æ•°æ®éƒ½ä¼šæœ‰ä¸€ä¸ªä¸»é”®ï¼Œå³ä½¿ä½ ä¸åˆ›å»ºä¸»é”®ï¼Œç³»ç»Ÿä¹Ÿä¼šå¸®ä½ åˆ›å»ºä¸€ä¸ªéšå¼çš„ä¸»é”®ã€‚***

  è¿™æ˜¯å› ä¸º InnoDB æ˜¯æŠŠæ•°æ®å­˜æ”¾åœ¨ B+ æ ‘ä¸­çš„ï¼Œè€Œ B+ æ ‘çš„é”®å€¼å°±æ˜¯ä¸»é”®ï¼Œ**åœ¨ B+ æ ‘çš„å¶å­èŠ‚ç‚¹ä¸­ï¼Œå­˜å‚¨äº†è¡¨ä¸­æ‰€æœ‰çš„æ•°æ®ã€‚**

  è¿™ç§ä»¥ä¸»é”®ä½œä¸º B+ æ ‘ç´¢å¼•çš„é”®å€¼è€Œæ„å»ºçš„ B+ æ ‘ç´¢å¼•ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºèšé›†ç´¢å¼•ã€‚

* éèšé›†ç´¢å¼•ï¼ˆéèšç°‡ç´¢å¼•ï¼‰ï¼šä»¥ä¸»é”®ä»¥å¤–çš„åˆ—å€¼ä½œä¸ºé”®å€¼æ„å»ºçš„ B+ æ ‘ç´¢å¼•ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºéèšé›†ç´¢å¼•ã€‚

  éèšé›†ç´¢å¼•ä¸èšé›†ç´¢å¼•çš„åŒºåˆ«åœ¨äº***éèšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¸å­˜å‚¨è¡¨ä¸­çš„æ•°æ®ï¼Œè€Œæ˜¯å­˜å‚¨è¯¥åˆ—å¯¹åº”çš„ä¸»é”®***ï¼Œæƒ³è¦**æŸ¥æ‰¾æ•°æ®æˆ‘ä»¬è¿˜éœ€è¦æ ¹æ®ä¸»é”®å†å»èšé›†ç´¢å¼•ä¸­è¿›è¡ŒæŸ¥æ‰¾**ï¼Œè¿™ä¸ªå†æ ¹æ®èšé›†ç´¢å¼•æŸ¥æ‰¾æ•°æ®çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç§°ä¸º***å›è¡¨***ã€‚

## èšç°‡ç´¢å¼•æŸ¥æ‰¾æµç¨‹

![](https://gitee.com/bestzmr/blog-resources/raw/master/resources/imgs/jucu.jpg) 

**select** * **from** **user** **where** id>=18 **and** id <40

å…¶ä¸­ id ä¸ºä¸»é”®ï¼Œå…·ä½“çš„æŸ¥æ‰¾è¿‡ç¨‹å¦‚ä¸‹ï¼š

â‘ ä¸€èˆ¬æ ¹èŠ‚ç‚¹éƒ½æ˜¯å¸¸é©»å†…å­˜çš„ï¼Œä¹Ÿå°±æ˜¯è¯´é¡µ 1 å·²ç»åœ¨å†…å­˜ä¸­äº†ï¼Œæ­¤æ—¶ä¸éœ€è¦åˆ°ç£ç›˜ä¸­è¯»å–æ•°æ®ï¼Œç›´æ¥ä»å†…å­˜ä¸­è¯»å–å³å¯ã€‚

ä»å†…å­˜ä¸­è¯»å–åˆ°é¡µ 1ï¼Œè¦æŸ¥æ‰¾è¿™ä¸ª id>=18 and id <40 æˆ–è€…èŒƒå›´å€¼ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ‰¾åˆ° id=18 çš„é”®å€¼ã€‚

ä»é¡µ 1 ä¸­æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°é”®å€¼ 18ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦æ ¹æ®æŒ‡é’ˆ ***p2ï¼Œå®šä½åˆ°é¡µ 3ã€‚***

â‘¡è¦ä»é¡µ 3 ä¸­æŸ¥æ‰¾æ•°æ®ï¼Œæˆ‘ä»¬å°±éœ€è¦æ‹¿ç€ p2 æŒ‡é’ˆå»ç£ç›˜ä¸­è¿›è¡Œè¯»å–é¡µ 3ã€‚

ä»ç£ç›˜ä¸­è¯»å–é¡µ 3 åå°†é¡µ 3 æ”¾å…¥å†…å­˜ä¸­ï¼Œç„¶åè¿›è¡ŒæŸ¥æ‰¾ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°é”®å€¼ 18ï¼Œ***ç„¶åå†æ‹¿åˆ°é¡µ 3 ä¸­çš„æŒ‡é’ˆ p1ï¼Œå®šä½åˆ°é¡µ 8ã€‚***

â‘¢åŒæ ·çš„é¡µ 8 é¡µä¸åœ¨å†…å­˜ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å†å»ç£ç›˜ä¸­å°†é¡µ 8 è¯»å–åˆ°å†…å­˜ä¸­ã€‚

å°†é¡µ 8 è¯»å–åˆ°å†…å­˜ä¸­åã€‚å› ä¸ºé¡µä¸­çš„æ•°æ®æ˜¯é“¾è¡¨è¿›è¡Œè¿æ¥çš„ï¼Œ***è€Œä¸”é”®å€¼æ˜¯æŒ‰ç…§é¡ºåºå­˜æ”¾çš„ï¼Œæ­¤æ—¶å¯ä»¥æ ¹æ®äºŒåˆ†æŸ¥æ‰¾æ³•å®šä½åˆ°é”®å€¼ 18ã€‚***

æ­¤æ—¶å› ä¸ºå·²ç»åˆ°æ•°æ®é¡µäº†ï¼Œæ­¤æ—¶æˆ‘ä»¬å·²ç»æ‰¾åˆ°ä¸€æ¡æ»¡è¶³æ¡ä»¶çš„æ•°æ®äº†ï¼Œå°±æ˜¯é”®å€¼ 18 å¯¹åº”çš„æ•°æ®ã€‚

å› ä¸ºæ˜¯èŒƒå›´æŸ¥æ‰¾ï¼Œè€Œä¸”æ­¤æ—¶æ‰€æœ‰çš„æ•°æ®åˆéƒ½å­˜åœ¨å¶å­èŠ‚ç‚¹ï¼Œå¹¶ä¸”æ˜¯æœ‰åºæ’åˆ—çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å¯¹é¡µ 8 ä¸­çš„é”®å€¼ä¾æ¬¡è¿›è¡Œéå†æŸ¥æ‰¾å¹¶åŒ¹é…æ»¡è¶³æ¡ä»¶çš„æ•°æ®ã€‚

æˆ‘ä»¬å¯ä»¥ä¸€ç›´æ‰¾åˆ°é”®å€¼ä¸º 22 çš„æ•°æ®ï¼Œç„¶åé¡µ 8 ä¸­å°±æ²¡æœ‰æ•°æ®äº†ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦æ‹¿ç€é¡µ **8 ä¸­çš„ p æŒ‡é’ˆå»è¯»å–é¡µ 9 ä¸­çš„æ•°æ®ã€‚**

â‘£å› ä¸ºé¡µ 9 ä¸åœ¨å†…å­˜ä¸­ï¼Œå°±åˆä¼šåŠ è½½é¡µ 9 åˆ°å†…å­˜ä¸­ï¼Œå¹¶é€šè¿‡å’Œé¡µ 8 ä¸­ä¸€æ ·çš„æ–¹å¼è¿›è¡Œæ•°æ®çš„æŸ¥æ‰¾ï¼Œç›´åˆ°å°†é¡µ 12 åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå‘ç° 41 å¤§äº 40ï¼Œæ­¤æ—¶ä¸æ»¡è¶³æ¡ä»¶ã€‚é‚£ä¹ˆæŸ¥æ‰¾åˆ°æ­¤ç»ˆæ­¢ã€‚

æœ€ç»ˆæˆ‘ä»¬æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰æ•°æ®ï¼Œæ€»å…± 12 æ¡è®°å½•ï¼š

(18,kl), (19,kl), (22,hj), (24,io), (25,vg) , (29,jk), (31,jk) , (33,rt) , (34,ty) , (35,yu) , (37,rt) , (39,rt) ã€‚

ä¸‹é¢çœ‹ä¸‹å…·ä½“çš„æŸ¥æ‰¾æµç¨‹å›¾:

![](https://gitee.com/bestzmr/blog-resources/raw/master/resources/imgs/jusearch.jpg) 



## éèšé›†ç´¢å¼•æŸ¥æ‰¾æ•°æ®

![](https://gitee.com/bestzmr/blog-resources/raw/master/resources/imgs/noju.jpg) 

![](https://gitee.com/bestzmr/blog-resources/raw/master/resources/imgs/nj.jpg) 

åœ¨å¶å­èŠ‚ç‚¹ä¸­ï¼Œä¸å†å­˜å‚¨æ‰€æœ‰çš„æ•°æ®äº†ï¼Œå­˜å‚¨çš„æ˜¯é”®å€¼å’Œä¸»é”®.

## æ€»ç»“èšç°‡å’Œéèšç°‡

***select * from xxx where name ="Jim";***

nameæ˜¯éå…³é”®åˆ—,ä½†æ˜¯***nameåŒæ—¶ä¹Ÿæ˜¯ç´¢å¼•åˆ— - éèšç°‡ç´¢å¼•.***

* éå¶èŠ‚ç‚¹ - ç´¢å¼•åˆ—å¯¹åº”çš„å€¼.
* å¶èŠ‚ç‚¹ - é”®å€¼å¯¹(nameç´¢å¼•å€¼ - ä¸»é”®å€¼)

***ä»å›¾ä¸€ä¸­å¯ä»¥é€šè¿‡éèšç°‡ç´¢å¼•åˆ—çš„å€¼ -> ç¡®å®šåˆ°è¯¥ç´¢å¼•åˆ—å€¼å¯¹åº”çš„ä¸»é”®å€¼id.***





![](https://gitee.com/bestzmr/blog-resources/raw/master/resources/imgs/x.png) 



æ ¹æ®å›¾ä¸€æ‰¾åˆ°çš„ä¸»é”®id,ç„¶åè¿›è¡Œä¸€***æ¬¡å›è¡¨æ“ä½œ***.å†ç»§ç»­æŒ‰ç…§èšç°‡ç´¢å¼•çš„æœç´¢æ–¹å¼æ¥ç¡®å®šåˆ°å…·ä½“çš„è¡Œè®°å½•



![](https://gitee.com/bestzmr/blog-resources/raw/master/resources/imgs/y.png) 



 

# MyISAM - ç´¢å¼•

***ç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶æ˜¯åˆ†å¼€çš„.***B+æ ‘ç»“æ„.

åœ¨ MyISAM ä¸­ï¼Œ***èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹éƒ½ä¼šå­˜å‚¨æ•°æ®çš„æ–‡ä»¶åœ°å€ã€‚***

![](https://gitee.com/bestzmr/blog-resources/raw/master/resources/imgs/z.png)  