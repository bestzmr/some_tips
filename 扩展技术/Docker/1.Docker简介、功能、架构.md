## Docker是什么？

Docker是一个提供集中式平台来执行应用程序的软件。 它将软件组件包装成一个完整的标准化单元，其中包含所有要运行的内容。 无论是代码，运行时环境，工具还是程序库。它保证软件能始终按预期那样运行。Docker提供了一种称为容器的隔离环境中运行应用程序的功能。 您可以在给定的主机上同时运行多个容器。 它是轻量级的，可立即启动并使用较少的内存。 它是默认安全的，因为每个容器彼此隔离。

> **注意** - Docker 容器并不是针对某种特定的平台。 它可以在任何计算机，任何基础架构和云中运行。

### Docker引擎

Docker引擎是一个包含以下主要组件的客户端服务器应用程序。

- 一种服务器，它是一种称为守护进程并且长时间运行的程序。
- REST API用于指定程序可以用来与守护进程通信的接口，并指示它做什么。
- 一个有命令行界面(CLI)工具的客户端。

Docker引擎组件的流程如下图所示

![](..\..\imgs\docker\docker引擎组件.png)

#### 解释一下上图中的元素:

- **Docker守护进程(docker daemon)**是运行在你的操作系统上的一个服务。目前，它只能运行在Linux上，因为它依赖于一些Linux内核特性(比如Cgroup与Namespace)。 但是，也有一些特殊的办法让Docker运行在MacOS与Windows上(运行在Linux虚拟机中)。
- **Docker守护进程**提供了**REST API**。许多工具(Docker命令行，Docker Compose等)都可以通过**REST API**与**Docker守护进程**进行交互，例如创建容器，构建镜像等。
- **Docker命令行(docker CLI)**是与**Docker守护进程**进行交互的主要工具。



## Docker架构

Docker 包括三个基本概念:

- **镜像（Image）**：Docker 镜像（Image），就相当于是一个 root 文件系统。比如官方镜像 ubuntu:16.04 就包含了完整的一套 Ubuntu16.04 最小系统的 root 文件系统。
- **容器（Container）**：镜像（Image）和容器（Container）的关系，就像是面向对象程序设计中的类和实例一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等。
- **仓库（Repository）**：仓库可看成一个代码控制中心，用来保存镜像。

Docker 使用客户端-服务器 (C/S) 架构模式，使用远程API来管理和创建Docker容器。

Docker 容器通过 Docker 镜像来创建。

Docker遵循客户端 - 服务器架构。 其架构主要分为三个部分。

1. **客户端(Client)**：Docker提供命令行界面(CLI)工具，客户端与Docker守护进程交互。客户端可以构建，运行和停止应用程序。客户端还可以远程与`Docker_Host`进行交互。
2. **Docker_Host**：它包含容器，映像和Docker守护程序。它提供完整的环境来执行和运行应用程序。
3. **注册表(Registry)**：它是全局映像库。可以访问并使用这些映像在Docker环境中运行应用程序。

如下图所示 - 

![img](..\..\imgs\docker\docker架构.png)

#### 从左至右理解上图:

- **最左侧是Docker客户端，即Docker命令行**。我们可以运行各种Docker命令，比如构建镜像(docker build)，下载镜像(docker pull)，运行容器(docker run)。Docker命令行可以安装在各种操作系统上，例如Windows，MacOS或者Linux服务器。
- **中间是Docker主机，Docker守护进程运行在上面**。Docker命令行可以轻松地连接远程的Docker主机(给定IP和端口即可)。而在MacOS与Windows上”运行”Docker时，Docker守护进程事实上运行在Linux虚拟机中。这里关键点在于，Docker守护进程和命令行可以运行在不同的主机上。
- **最右侧是Docker仓库**，它也是Docker生态系统中的一份子。它是我们下载、上传、存储以及分享Docker镜像的地方。

![](..\..\imgs\docker\docker架构2.png)

守护进程：守护进程(daemon)是一类在后台运行的特殊进程，用于执行特定的系统任务。很多守护进程在系统引导的时候启动，并且一直运行直到系统关闭。另一些只在需要的时候才启动，完成任务后就自动结束。

### Docker守护进程

这是一个用于监听Docker API请求的进程。 它还管理Docker对象，如：映像，容器，网络等。守护进程还可以与其他守护进程通信以管理Docker服务。

### Docker客户端

Docker客户端是许多Docker用户与Docker进行交互的主要方式。当使用`docker run`这样的命令时，客户端将这些命令发送到`docker d`，然后将其运行。docker命令使用Docker API。

### Docker注册管理

Docker注册表用于存储Docker映像。Docker提供**Docker Hub**和**Docker Cloud**，这是任何人都可以使用的公共注册表。Docker配置为默认在**Docker Hub**上查找映像。

当我们使用`docker pull`或`docker run`命令时，从配置的注册表中提取所需的映像。 当使用`docker push`命令时，映像被推送到配置的注册表中。





## Docker功能特点			 				 				 				 			

虽然Docker提供了很多功能，但这里只列出了一些主要功能，如下所示 - 

- 轻松快捷的配置
- 提高工作效率
- 应用隔离
- 云集
- 路由网
- 服务
- 安全管理

**1. 轻松快捷的配置**

这是Docker的一个主要功能，可帮助我们轻松快速地配置系统。

可以在更少的时间和精力的情况下部署代码。 由于Docker可以在各种各样的环境中使用，基础架构不再要求与应用程序的环境相关联。

**2. 提高工作效率**

通过放宽技术配置和应用的快速部署。 毫无疑问，它节约了时间提高了生产率。 Docker不仅有助于在孤立环境中执行应用程序，而且还减少了资源。

**3. 应用隔离**

Docker提供用于在隔离环境中运行应用程序的容器。 每个容器独立于另一个容器，并允许执行任何类型的应用程序。

**4. 云集(Swarm)**

它是Docker容器的集群和调度工具。 Swarm使用Docker API作为其前端，这有助于我们使用各种工具来控制它。 它还可以将Docker主机集群控制为一个虚拟主机。 这是一个用于启用可插拔后端的自组织引擎组。

**5. 路由网**

它将可用节点上已发布端口的传入请求路由到活动容器。 即使节点上没有任务正在运行，此功能也可以实现连接。

**6. 服务**

服务是允许指定集群内的容器状态的任务列表。 每个任务表示一个应该运行的容器的一个实例，并且Swarm在节点之间调度它们。

**7. 安全管理**

它允许将保密数据保存到云群(swarm)中，然后选择给予服务访问某些保密数据。

它包括一些重要的命令给引擎，如保密数据检查，保密数据创建等。